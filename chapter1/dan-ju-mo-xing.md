# 单据模型

单据模型是用来描述 **单据中包含字段集合、以及如何在前端进行UI布局 **的数据结构。为了满足产品经理的需求，我们提供了 **单据工具**， 来对 **单据模型 **进行维护。

单据模型分为 **设计态** 和 **运行态**，其中：

## 设计态

设计态是指 产品经理 **用来限制单据 最大适用范围的模型**。其中包括以下内容：

1. 参照字段是否允许带出属性；
2. 参照字段允许带出属性的最大集合；
3. 字段是否必填；
4. 字段是否可以在【单据设置】中被修改必填状态；
5. 字段是否只读；
6. 字段是否可以在【单据设置】中被修改只读状态；
7. 字段是否可见；
8. 字段是否可以在【单据设置】中被修改可见状态；
9. 字段是否为上下文字段；
10. 字段是否为模板字段；

#### 上下文字段

上下文字段包含两类：

一类是指不在公共范围之内的字段。比如公式计算中涉及到的运算字段。

另一类是指单据需要自定义UI展示的字段，比如支付方式，单据日期等；

#### 模板字段

模板字段是指上下文字段中，需要在界面上显示的字段，这个信息会提供给打印模板使用，让打印模板知道哪些字段是可以在表头、表尾区域显示出来的。

_注意：设计态只应该在开发阶段被修改，开发完成后，设计态应该进行封存。实际上线阶段时，只有【单据设置】 需要使用设计态模型。_

## 运行态

运行态是指 实际应用运行过程中，管理员通过【单据设置】配置后，直接给单据所使用的模型，其中除了设计态所设置的各种字段状态之外，还包括了单据头、单据体的字段布局信息。

布局信息包括：

1. 单据头分为几栏显示（3-5栏）；
2. 单据头字段排列顺序；
3. 单据头字段跨列信息；
4. 单据体字段排序信息；

**单据模型的TS定义，可以在 **`app-server/common/voucher.ts`** 中找到。**

## 单据工具

单据工具可以帮助你快速制定出符合需求的单据模型，[查看如何使用单据工具](/chapter1/dan-ju-mo-xing/shi-yong-dan-ju-gong-ju.md)

